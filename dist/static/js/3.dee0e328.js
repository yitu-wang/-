"use strict";(self["webpackChunkwymusic"]=self["webpackChunkwymusic"]||[]).push([[3],{9028:function(t,s,i){i.d(s,{Z:function(){return d}});var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"center"},[t._m(0),i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.playListMusic,stripe:""}},[i("el-table-column",{attrs:{type:"index",label:"序号",width:"100"}}),i("el-table-column",{attrs:{label:"歌名",width:"200"},scopedSlots:t._u([{key:"default",fn:function(s){return[i("div",{staticClass:"musicItem",staticStyle:{cursor:"pointer"},on:{click:function(i){return t.$router.push({path:"/discover/music",query:{id:s.row.id}})}}},[t._v(" "+t._s(s.row.name)+" ")])]}}])}),i("el-table-column",{attrs:{label:"作者",width:"200"},scopedSlots:t._u([{key:"default",fn:function(s){return[t.program?i("div",{staticClass:"musicItem",on:{click:function(i){return t.$router.push({path:"/discover/singer",query:{id:s.row.artists[0].id}})}}},[t._v(" "+t._s(s.row.artists[0].name)+" ")]):i("div",{staticClass:"musicItem",on:{click:function(i){return t.$router.push({path:"/discover/singer",query:{id:s.row.ar[0].id}})}}},[t._v(" "+t._s(s.row.ar[0].name)+" ")])]}}])}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(s){return[i("i",{staticClass:"el-icon-video-play",attrs:{title:"播放"},on:{click:function(i){return t.musicItemPush(s.$index)}}}),i("i",{staticClass:"el-icon-share",attrs:{title:"分享"}}),i("i",{staticClass:"el-icon-download",attrs:{title:"下载"}})]}}])})],1)],1)},a=[function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"header"},[i("h3",[t._v("歌曲列表")])])}],n=i(5598),o=i(629),c={data(){return{}},props:{playListMusic:{type:Array,deep:!0},program:{type:Boolean}},methods:{...(0,o.OI)(["musicListFn","musicUrlFn","musicDetailFn","musicItemFn","clearMusicListFn"]),async musicItemPush(t){let s=this.playListMusic[t].id;const i=await(0,n._z)({id:s});this.musicUrlFn(i.data.data[0]);const e=await(0,n.Hk)({ids:s});this.musicDetailFn(e.data.songs[0]),this.musicItemFn(e.data.songs[0])}}},r=c,l=i(1001),u=(0,l.Z)(r,e,a,!1,null,"32c6347d",null),d=u.exports},5003:function(t,s,i){i.r(s),i.d(s,{default:function(){return f}});var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"box"},[i("div",{staticClass:"container"},[i("div",{staticClass:"right"},[i("h4",[t._v("   全部榜单")]),i("ul",t._l(t.topListItem,(function(s){return i("li",{key:s.id,on:{click:function(i){return t.topListUrlFn(s.id)}}},[i("img",{attrs:{src:s.coverImgUrl,alt:""}}),i("h5",[t._v(t._s(s.name))]),i("span",[t._v(t._s(s.updateFrequency))])])})),0)]),i("TopDetil",{key:t.topListId})],1)])},a=[],n=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"container"},[i("div",{staticClass:"left"},[i("div",{staticClass:"header"},[i("div",{staticClass:"left"},[i("span",{staticClass:"msk"},[i("img",{attrs:{src:t.topDetilData.coverImgUrl,alt:""}})])]),i("div",{staticClass:"right"},[i("h3",[t._v(t._s(t.topDetilData.name))]),i("div",{staticClass:"auther"},[i("p",[t._v("更新时间: "+t._s(t.formatDate(t.topDetilData.updateTime)))])]),i("div",{staticClass:"btn"},[i("button",[i("i",{staticClass:"el-icon-video-play",on:{click:t.playMusicFn}},[t._v(" 播放")])]),i("button",[i("i",{staticClass:"el-icon-folder-add"},[t._v(" ("+t._s(t.topDetilData.commentCount)+")")])]),i("button",[i("i",{staticClass:"el-icon-share"},[t._v(" ("+t._s(t.topDetilData.shareCount)+") ")])]),i("button",[i("i",{staticClass:"el-icon-chat-line-square"},[t._v(" ("+t._s(t.topDetilData.subscribedCount)+")")])])]),i("p",{staticClass:"text",domProps:{innerHTML:t._s(t.topDetilData.description)}})])]),i("MusicList",{attrs:{playListMusic:t.topListMusic}}),i("div",{staticClass:"footer center"},[i("div",{staticClass:"header"},[i("h3",[t._v("评论")]),i("span",[t._v("共"+t._s(t.topComment.total)+"条评论")])]),i("div",{staticClass:"userText"},[i("img",{attrs:{src:t.squareUrl,alt:""}}),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{name:"usertext",cols:"30",rows:"10"},domProps:{value:t.content},on:{input:function(s){s.target.composing||(t.content=s.target.value)}}}),i("button",{on:{click:t.addCommentFn}},[t._v("评论")])]),i("div",{staticClass:"footer"},[i("h4",[t._v("最新评论")]),i("ul",t._l(t.topComment.comments,(function(s){return i("li",{key:s.commentId},[i("img",{attrs:{src:s.user.avatarUrl,alt:""}}),i("p",{staticClass:"name"},[t._v(t._s(s.user.nickname))]),i("span",{staticClass:"content"},[t._v(t._s(s.content))]),i("span",{staticClass:"time"},[t._v(t._s(s.timeStr))]),i("div",{staticClass:"fun"},[i("i",{staticClass:"el-icon-thumb"}),i("span",{staticClass:"back"},[t._v("("+t._s(s.likedCount)+") | 回复")])])])})),0)])])],1)])},o=[],c=i(9028),r=i(5598),l=i(629),u={name:"topDetil",data(){return{topDetilData:[],topListMusic:[],topComment:{},content:""}},props:{topListId:{type:Number,deep:!0}},components:{MusicList:c.Z},async created(){const t=await(0,r.Gj)({id:this.$route.query.id});this.topDetilData=t.data.playlist;const s=await(0,r.d6)({id:this.$route.query.id});this.topListMusic=s.data.songs;const i=await(0,r.L5)({id:this.$route.query.id});this.topComment=i.data},methods:{...(0,l.OI)(["musicListFn","musicUrlFn","musicDetailFn","musicItemFn","clearMusicListFn"]),formatDate(t){let s=new Date(t),i=s.getFullYear(),e=s.getMonth(),a=s.getDate();s.getHours(),s.getMinutes(),s.getSeconds();return i+"-"+e+"-"+a},async playMusicFn(){this.clearMusicListFn(),this.musicListFn(this.topListMusic);let t=this.topListMusic[0].id;const s=await(0,r._z)({id:t});this.musicUrlFn(s.data.data[0]);const i=await(0,r.Hk)({ids:t});this.musicDetailFn(i.data.songs[0])},async addCommentFn(){if(""!=this.content){let t=this.$route.query.id;await(0,r.Sj)({type:2,id:t,content:this.content});this.content="";const s=await(0,r.L5)({id:t});this.topComment=s.data,localStorage.getItem("userid")?this.$notify({message:"评论成功",type:"success"}):this.$notify.error({message:"评论失败,请先登录"})}}},computed:{...(0,l.rn)(["squareUrl"])}},d=u,m=i(1001),p=(0,m.Z)(d,n,o,!1,null,"7aa19547",null),h=p.exports,v={name:"topList",data(){return{topListItem:[],topListId:0}},components:{TopDetil:h},async created(){const t=await(0,r.$d)();this.topListItem=t.data.list,this.topListId=this.topListItem[0].id,console.log(this.topListId)},methods:{topListUrlFn(t){this.topListId=t,this.$router.push({path:"/discover/toplist",query:{id:t}})}}},_=v,C=(0,m.Z)(_,e,a,!1,null,"1ff27978",null),f=C.exports}}]);
//# sourceMappingURL=3.dee0e328.js.map